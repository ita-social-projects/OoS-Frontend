
  <div class="app-wrapper">
    <mat-drawer-container>
      <mat-drawer class="mobile-sidenav" mode="side" [(opened)]="visibleSideNav">

        <div class="mobile-sidenav-content" *ngIf="MobileView">

          <div *ngIf="((isAuthorized$ | async) && (user$ | async)) then isAuthorized; else isUnauthorized"></div>

          <ng-template #isUnauthorized>
            <div class="mobile-sidenav-header">
              <button mat-stroked-button class="header_login" (click)="login()">
                УВІЙТИ/ЗАРЕЄСТРУВАТИСЯ
              </button>
              <button mat-button (click)="changeView()"><mat-icon>close</mat-icon></button>
            </div>
            <div class="mobile-sidenav-buttons">
              <button mat-flat-button class="header_lang">
                <mat-icon>language</mat-icon>
                <mat-select (selectionChange)="setLanguage()" [(value)] = "selectedLanguage" class="lang-option">
                  <mat-option value="uk"> {{Languages.uk}} </mat-option>
                </mat-select>
              </button>
            </div>
          </ng-template>

          <ng-template #isAuthorized>
            <div class="mobile-sidenav-header">
              <div class="header_username">
                <button mat-icon-button class="header_menu-button_account-circle">
                  <mat-icon>account_circle</mat-icon>
                </button>
                <ng-container>{{user.firstName}} {{user.lastName}}</ng-container>
              </div>
              <button mat-button (click)="changeView()"><mat-icon>close</mat-icon></button>
            </div>
            <div class="mobile-sidenav-shell">

              <div class="mobile-sidenav-notification">
                <button mat-icon-button [matMenuTriggerFor]="menu" class="pointer">
                  <mat-icon class="mobile-sidenav-notification-icon">notifications_none</mat-icon>
                  <span class="mobile-sidenav-notification-text">Сповіщення</span>
                </button>
                <span class="mobile-sidenav-notification-badge">
                  <mat-icon matBadge="17" ></mat-icon>
                </span>
                <!-- Todo, verify if needed or just make redirect-->
                <mat-menu #menu="matMenu" class="mobile-sidenav-notification-popup">
                  <span>1 нова заявка очікує підтвердження <mat-icon class="circle-notification">brightness_1</mat-icon></span>
                  <button mat-menu-item [routerLink]="'url'" class="btn-notification">
                    <span>Переглянути </span>
                  </button>
                </mat-menu>
              </div>

              <div class="mobile-sidenav-language">
                <button mat-flat-button class="header_lang">
                  <mat-icon>language</mat-icon>
                  <mat-select (selectionChange)="setLanguage()" [(value)] = "selectedLanguage" class="lang-option">
                    <mat-option value="uk"> {{Languages.uk}} </mat-option>
                  </mat-select>
                </button>
              </div>

              <div class="mobile-sidenav-menu">
                <a [routerLink]="'./personal-cabinet/config'"><button>Особиста інформація</button></a>
                <a [routerLink]="'./personal-cabinet/' + user.role + '/info'"> <button>Інформація про
                    {{roles[user.role]}}</button></a>
                <a [routerLink]="'./personal-cabinet/workshops'"><button >Мої гуртки</button></a>
                <a [routerLink]="'./personal-cabinet/applications'"><button >Мої заяви</button></a>
                <a [routerLink]="'./personal-cabinet/messages'"><button >Повідомлення</button></a>
                <a *ngIf="user.role === Role.parent" [routerLink]="'./personal-cabinet/parent/favorite'"><button
                    mat-menu-item>Улюблене</button></a>
                <hr>
                <button mat-menu-item (click)="logout()">Вийти</button>
              </div>
            </div>
          </ng-template>

            <div class="mobile-sidenav-info">
              <div class="header_about">
                <a [routerLink]="'./about'">ПРО ПОРТАЛ</a>
              </div>
              <div class="header_support">
                <a class="header_support_title" [routerLink]="'./support'">
                  <span class="header_support_icon material-icons">support</span>
                  ПІДТРИМКА
                </a>
              </div>

            </div>

        </div>

      </mat-drawer>


      <!-- Content of the page with hidden SideNav -->
        <app-header></app-header>
        <app-shell></app-shell>
        <app-footer></app-footer>

    </mat-drawer-container>

  </div>

