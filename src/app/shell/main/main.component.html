<div class="main">
  <ng-container *ngIf="!(isLoadingData$ | async)">
    <div class="main-header">
      <h3>Найпопулярніші напрямки</h3>
      <a routerLink="/all-categories" class="main_link">
        {{ isMobile ? 'Всі' : 'Переглянути всі' }} <span class="material-icons arrow">arrow_forward</span>
      </a>
    </div>

    <ng-container *ngIf="(topDirections$ | async)?.length; then topDirections; else emptyData"></ng-container>

    <ng-template #topDirections>
      <div class="card-wrapper">
        <app-category-card
          class="card"
          *ngFor="let direction of topDirections$ | async"
          [direction]="direction.direction"
          [workshopsCount]="direction.workshopsCount">
        </app-category-card>
      </div>
    </ng-template>

    <div class="main-header">
      <h3>Найпопулярніші гуртки</h3>
      <a routerLink="/result" class="main_link">
        {{ isMobile ? 'Всі' : 'Переглянути всі' }} <span class="material-icons arrow">arrow_forward</span>
      </a>
    </div>

    <ng-container *ngIf="(topWorkshops$ | async)?.length; then topWorkshops; else emptyData"></ng-container>
  </ng-container>
  <ng-template #topWorkshops>
    <div class="card-wrapper">
      <app-workshop-card
        class="card"
        *ngFor="let workshop of topWorkshops$ | async"
        [workshop]="workshop"
        [isMainPage]="true"
        [userRoleView]="Role.unauthorized">
      </app-workshop-card>
    </div>
  </ng-template>

  <ng-template #emptyData>
    <div class="empty-list-wrapper">
      <p class="text">За результатами нічого не знайдено</p>
    </div>
  </ng-template>
</div>

<div *ngIf="(role$ | async) === Role.unauthorized" class="main_registration" fxLayoutAlign="space-between center">
  <div class="main_description">
    <h2 class="main_question">Надаєш освітні послуги?</h2>
    <h4 class="main_hint">Зареєструйся - допоможемо залучити нових учнів!</h4>
  </div>
  <div class="main_button-wrapper">
    <button mat-stroked-button class="main_button" (click)="register()">ЗАРЕЄСТРУВАТИСЯ</button>
  </div>
</div>
