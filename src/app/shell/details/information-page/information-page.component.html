<div class="container" *ngIf="provider">

  <ng-container *ngIf="(isMobileScreen$ | async) && workshop && shouldDisplay">
    <app-actions [role]="role" [workshop]="workshop"></app-actions>
  </ng-container>

  <app-image-carousel [images]="images"></app-image-carousel>

  <div class="details-wrapper">
    <div fxLayout="column" fxLayoutAlign="space-between space-between">
      <ng-container *ngIf="workshop then WorkshopDetails; else ProviderDetails">
      </ng-container>
    </div>

    <mat-tab-group class="nav" [(selectedIndex)]="selectedIndex">
      <mat-tab class="label" label="ПРО ГУРТОК" *ngIf="workshop">
        <app-workshop-about [workshop]="workshop"></app-workshop-about>
      </mat-tab>
      <mat-tab class="label" label="ПРО ЗАКЛАД">
        <app-provider-about [provider]="provider"></app-provider-about>
      </mat-tab>
      <mat-tab class="label" label="ВИКЛАДАЧІ" *ngIf="workshop">
        <app-workshop-teachers [teachers]="workshop.teachers"></app-workshop-teachers>
      </mat-tab>
      <mat-tab class="label" label="ІНШІ ГУРТКИ ЗАКЛАДУ">
        <app-all-provider-workshops [workshop]="workshop" [role]="role">
        </app-all-provider-workshops>
      </mat-tab>
      <mat-tab class="label" label="ВІДГУКИ" *ngIf="workshop">
        <app-reviews [workshop]="workshop" [role]="role">
        </app-reviews>
      </mat-tab>
    </mat-tab-group>

  </div>
</div>

<ng-template #WorkshopDetails>
  <div fxLayout="row" fxLayoutAlign="space-between center">
    <div fxLayout="row" fxLayout.lt-sm="row wrap" fxLayoutAlign="start center">
      <h1 class="title">{{workshop.title}}</h1>
    </div>
    <div>
      <img class="details-icon" [src]="categoryIcons[workshop.directionId]" alt="{{workshop.title}}">
    </div>
  </div>
  <span class="icon-text">
    <mat-icon class="icon">star</mat-icon>
    {{workshop.rating}}
  </span>

  <a [routerLink]="['/details/provider',provider.id ]" fxLayout="row" fxLayoutAlign="start center">
    <span class="icon-text details-link">
      <mat-icon class="icon">home</mat-icon>{{ provider.fullTitle }}
    </span>
  </a>

</ng-template>

<ng-template #ProviderDetails>
  <div fxLayout="row" fxLayout.lt-sm="row wrap" fxLayoutAlign="start center">
    <h1 class="title">{{provider.fullTitle}}</h1>
  </div>
  <p class="icon-text">
    <mat-icon class="icon">star</mat-icon>
    {{provider.rating}}
  </p>
  <div fxLayout="row wrap" fxLayoutAlign="start">
    <span class="icon-text">
      <mat-icon class="icon">call</mat-icon><a
        href="tel:{{phonePrefix}}{{provider.phoneNumber}}">{{phonePrefix}}{{provider.phoneNumber}}</a>
    </span>

    <span class="icon-text">
      <mat-icon class="icon">mail</mat-icon>
      <a href="mailto:{{provider.email}}" target="_blank">{{provider.email}}</a>
    </span>

    <span class="icon-text">
      <mat-icon class="icon">location_on</mat-icon>
      <span fxLayout="row wrap" fxLayoutAlign="start">
        <span>{{address.city}},</span>
        <span>{{address.street}}, </span>
        <span>{{address.buildingNumber}}</span>
      </span>
    </span>
  </div>

  <span class="icon-text" *ngIf="provider.website">
    <mat-icon class="icon">language</mat-icon>
    <a [href]="provider.website">{{provider.website}}</a>
  </span>

  <div fxLayout="row wrap" fxLayoutAlign="start">
    <a href="{{provider.instagram}}" [ngClass]="provider.instagram ? 'link' : 'disable'">
      <img src="assets/icons/inst.png" alt="instagram">
    </a>
    <a href="{{provider.facebook}}" [ngClass]="provider.facebook ? 'link' : 'disable'">
      <img src="assets/icons/facebook.png" alt="facebook">
    </a>
  </div>

</ng-template>
