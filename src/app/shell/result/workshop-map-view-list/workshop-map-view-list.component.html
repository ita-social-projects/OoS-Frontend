<div class="wrapper" fxLayout="row" fxLayoutAlign="space-evenly">
  <div fxLayout="column" fxLayoutAlign="space-evenly">
    <div #WorkshopsWrap class="workshop-list">
      <app-workshop-card class="workshop" [userRoleView]="Role.unauthorized" *ngFor="let workshop of selectedWorkshops"
        [workshop]="workshop" [isMainPage]="true" #WorkshopsWrap>
      </app-workshop-card>
    </div>
    <app-paginator [totalEntities]="selectedWorkshops.length" [currentPage]="_currentPage"
      (pageChange)="onPageChange($event)">
    </app-paginator>
  </div>

  <div [ngClass]="selectedWorkshops.length ? 'map-half' : 'map-full'">
    <div fxLayout="row" fxLayoutAlign="center">
      <app-map class="map" [filteredWorkshops$]="filteredWorkshops$" (selectedAddress)="onSelectedAddress($event)">
      </app-map>
    </div>
  </div>


  <div
    *ngIf="isSelectedMarker && this.selectedWorkshops.length > 1; else elseBlock "
    #CurSelectedWorkshop
    class="workshop-details-cards"
    fxLayout='row'
    (@triggerName.done)="triggerNameDone($event)"
    [@triggerName]="currentWorkShopIndex"
    [style.left.vw]="left"
    (touchstart)="swipe($event, 'start')"
    (touchend)="swipe($event, 'end')"
  >
    <div class="mock"></div>
    <div *ngFor="let workshop of selectedWorkshops; let i = index">
      <app-workshop-card class="workshop-details-card"
      [workshop]="workshop" [isMainPage]="true" [isHorizontalView]="true"
      [@fade]="workshopDetailsAnimationState" (@fade.done)="fadeAnimationDone()"
      >
      </app-workshop-card>
    </div>
    <div class="mock"></div>
  </div>
  <div class="workshop-counter-wrapper" *ngIf="this.selectedWorkshops.length > 1">
    <div [@fade]="workshopDetailsAnimationState" (@fade.done)="fadeAnimationDone()" class="workshop-counter" >{{currentWorkShopIndex+1}} з {{selectedWorkshops.length}} гуртків</div>
  </div>
  <ng-template #elseBlock>
    <div
    *ngIf="isSelectedMarker"
    #CurSelectedWorkshop
    class="workshop-details-cards"
    fxLayout='row'
    [style.left.vw]="left"
    >
      <div class="mock"></div>
      <app-workshop-card class="workshop-details-card"
        [workshop]="selectedWorkshops[0]" [isMainPage]="true" [isHorizontalView]="true"
        [@fade]="workshopDetailsAnimationState" (@fade.done)="fadeAnimationDone()">
      </app-workshop-card>
      <div class="mock"></div>
    </div>
  </ng-template>
</div>

