<form [formGroup]="InfoFormGroup" fxLayout="column" fxLayoutAlign="center space-between" class="step">
  <app-image-form-control
    *ngIf="isRelease3"
    [imgMaxAmount]="1"
    [cropperConfig]="cropperConfig"
    [label]="'Фонове зображення'"
    formControlName="coverImage"
    [imageIdsFormControl]="InfoFormGroup.get('coverImageId')"></app-image-form-control>

  <label class="step-label">Форма власності<span class="step-required">*</span></label>
  <mat-form-field floatLabel="never" appearance="none">
    <mat-select
      disableOptionCentering
      panelClass="dropdown-panel"
      class="step-input"
      formControlName="ownership"
      name="ownership"
      placeholder="Оберіть форму власності">
      <ng-container *ngFor="let type of ownershipTypes | keyvalue">
        <mat-option [value]="type.key" class="dropdown-option">
          {{ ownershipTypesEnum[type.key] | translate }}
        </mat-option>
      </ng-container>
    </mat-select>
  </mat-form-field>
  <app-validation-hint [validationFormControl]="ownershipTypeControl" [isTouched]="ownershipTypeControl.touched">
  </app-validation-hint>

  <ng-container *ngIf="ownershipTypeControl.value === ownershipTypes.Private">
    <div fxLayout="row" fxLayoutAlign="left space-between">
      <label class="step-label">Ліцензія</label>
      <i
        [ngClass]="
          opened ? 'material-icons status-info-icon activeInfoBtn' : 'material-icons status-info-icon inactiveInfoBtn'
        "
        [matMenuTriggerFor]="licenseInfo"
        #childTrigger="matMenuTrigger"
        (menuOpened)="opened = childTrigger.menuOpen"
        (menuClosed)="opened = childTrigger.menuOpen"
        >info_outline</i
      >
      <mat-menu class="hint-menu" #licenseInfo="matMenu" [overlapTrigger]="false">
        {{ 'INFO_MENU.LICENSE' | translate }}
      </mat-menu>
    </div>
    <mat-form-field>
      <input matInput class="step-input" type="text" formControlName="license" autocomplete="none" appTrimValue />
    </mat-form-field>
    <app-validation-hint
      [validationFormControl]="InfoFormGroup.get('license')"
      [minCharachters]="validationConstants.INPUT_LENGTH_1"
      [maxCharachters]="validationConstants.INPUT_LENGTH_60">
    </app-validation-hint>
  </ng-container>

  <label class="step-label">Категорія закладу<span class="step-required">*</span></label>
  <mat-form-field floatLabel="never" appearance="none">
    <mat-select
      disableOptionCentering
      panelClass="dropdown-panel"
      class="step-input"
      formControlName="institutionType"
      name="institutionType"
      placeholder="Оберіть категорію закладу">
      <ng-container *ngFor="let type of institutionTypes | keyvalue">
        <mat-option [value]="type.key" class="dropdown-option">
          {{ institutionTypesEnum[type.key] | translate }}
        </mat-option>
      </ng-container>
    </mat-select>
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="InfoFormGroup.get('institutionType')"
    [isTouched]="InfoFormGroup.get('institutionType').touched">
  </app-validation-hint>

  <label class="step-label">Тип закладу<span class="step-required">*</span></label>
  <mat-form-field floatLabel="never" appearance="none">
    <mat-select disableOptionCentering panelClass="dropdown-panel" class="step-input" formControlName="typeId">
      <mat-option *ngFor="let type of providerTypes$ | async" [value]="type.id" class="dropdown-option">
        {{ type.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="InfoFormGroup.get('typeId')"
    [isTouched]="InfoFormGroup.get('typeId').touched">
  </app-validation-hint>

  <label class="step-label">Підпорядкування<span class="step-required">*</span></label>
  <mat-form-field floatLabel="never" appearance="none">
    <mat-select
      disableOptionCentering
      panelClass="dropdown-panel"
      class="step-input"
      formControlName="institution"
      placeholder="Оберіть підпорядкування"
      [compareWith]="compareInstitutions">
      <mat-option *ngFor="let institution of institutions$ | async" [value]="institution" class="dropdown-option">
        {{ institution.title }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="InfoFormGroup.get('institution')"
    [isTouched]="InfoFormGroup.get('institution').touched">
  </app-validation-hint>

  <label class="step-label">Статус організації<span class="step-required">*</span></label>
  <mat-form-field floatLabel="never" appearance="none">
    <mat-select
      disableOptionCentering
      panelClass="dropdown-panel"
      class="step-input"
      formControlName="institutionStatusId">
      <mat-option *ngFor="let status of institutionStatuses$ | async" [value]="status.id" class="dropdown-option">
        {{ status.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <label class="step-label"> Повна назва організації<span class="step-required">*</span></label>
  <mat-form-field>
    <input matInput class="step-input" type="text" formControlName="fullTitle" autocomplete="none" appTrimValue />
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="InfoFormGroup.get('fullTitle')"
    [minCharachters]="validationConstants.INPUT_LENGTH_1"
    [maxCharachters]="validationConstants.INPUT_LENGTH_60">
  </app-validation-hint>

  <label class="step-label"> Скорочена назва організації<span class="step-required">*</span></label>
  <mat-form-field>
    <input matInput class="step-input" type="text" formControlName="shortTitle" autocomplete="none" appTrimValue />
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="InfoFormGroup.get('shortTitle')"
    [minCharachters]="validationConstants.INPUT_LENGTH_1"
    [maxCharachters]="validationConstants.INPUT_LENGTH_60">
  </app-validation-hint>

  <label class="step-label"> {{ EdrpouIpnLabel }}<span class="step-required">*</span></label>
  <mat-form-field>
    <input
      matInput
      class="step-input"
      type="text"
      [minlength]="validationConstants.INPUT_LENGTH_8"
      [maxlength]="validationConstants.INPUT_LENGTH_10"
      formControlName="edrpouIpn"
      autocomplete="none"
      appTrimValue />
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="InfoFormGroup.get('edrpouIpn')"
    [minCharachters]="validationConstants.INPUT_LENGTH_8"
    [maxCharachters]="validationConstants.INPUT_LENGTH_10">
  </app-validation-hint>

  <label class="step-label"> Телефон<span class="step-required">*</span></label>
  <mat-form-field>
    <div fxLayout="row" fxLayoutAlign="start">
      <span class="step-text">{{ phonePrefix }}</span>
      <input
        matInput
        class="step-input"
        type="tel"
        formControlName="phoneNumber"
        appDigitOnly
        appTrimValue
        ui-number-mask
        ui-hide-group-sep
        maxlength="{{ validationConstants.PHONE_LENGTH }}" />
    </div>
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="InfoFormGroup.get('phoneNumber')"
    [minCharachters]="validationConstants.PHONE_LENGTH"
    [isPhoneNumber]="true">
  </app-validation-hint>

  <label class="step-label"> Електронна пошта<span class="step-required">*</span></label>
  <mat-form-field appearance="none">
    <input
      matInput
      class="step-input"
      type="email"
      formControlName="email"
      appTrimValue
      [placeholder]="mailFormPlaceholder" />
  </mat-form-field>
  <app-validation-hint [validationFormControl]="InfoFormGroup.get('email')"> </app-validation-hint>

  <label class="step-label">Засновник<span class="step-required">*</span></label>
  <mat-form-field>
    <input matInput class="step-input" type="text" formControlName="founder" autocomplete="none" appTrimValue />
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="InfoFormGroup.get('founder')"
    [minCharachters]="validationConstants.INPUT_LENGTH_1"
    [maxCharachters]="validationConstants.INPUT_LENGTH_60">
  </app-validation-hint>

  <label class="step-label"> ПІБ керівника<span class="step-required">*</span></label>
  <mat-form-field>
    <input matInput class="step-input" type="text" formControlName="director" autocomplete="none" appTrimValue />
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="InfoFormGroup.get('director')"
    [minCharachters]="validationConstants.INPUT_LENGTH_1"
    [maxCharachters]="validationConstants.INPUT_LENGTH_60">
  </app-validation-hint>

  <label class="step-label">Дата народження керівника<span class="step-required">*</span></label>
  <mat-form-field appPlaceholderStyling class="step-input step-input-date" floatLabel="never">
    <input
      [min]="minDate"
      [max]="maxDate"
      matInput
      [matDatepicker]="picker"
      formControlName="directorDateOfBirth"
      [appKeyFilter]="dateFilter"
      [placeholder]="dateFormPlaceholder | translate"/>
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="InfoFormGroup.get('directorDateOfBirth')"
    [isTouched]="InfoFormGroup.get('directorDateOfBirth').touched"
    minMaxDate="true">
  </app-validation-hint>
</form>
