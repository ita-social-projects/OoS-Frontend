<form [formGroup]="DescriptionFormGroup" fxLayout="column" fxLayoutAlign="center space-between" class="step">
  <app-image-form-control
    *ngIf="isImagesFeature"
    [imgMaxAmount]="10"
    [cropperConfig]="cropperConfig"
    [label]="'Фото'"
    formControlName="imageFiles"
    [imageIdsFormControl]="DescriptionFormGroup.get('imageIds')">
  </app-image-form-control>

  <label class="step-label step-label-title">{{ 'FORMS.LABELS.WEBSITE' | translate }}</label>
  <mat-form-field>
    <input matInput class="step-input" type="text" formControlName="website" autocomplete="none" appTrimValue />
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="DescriptionFormGroup.get('website')"
    [minCharacters]="validationConstants.INPUT_LENGTH_1"
    [maxCharacters]="validationConstants.INPUT_LENGTH_256">
  </app-validation-hint>

  <label class="step-label">Facebook</label>
  <mat-form-field>
    <input matInput class="step-input" type="text" formControlName="facebook" autocomplete="none" appTrimValue />
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="DescriptionFormGroup.get('facebook')"
    [minCharacters]="validationConstants.INPUT_LENGTH_1"
    [maxCharacters]="validationConstants.INPUT_LENGTH_256">
  </app-validation-hint>

  <label class="step-label">Instagram</label>
  <mat-form-field>
    <input matInput class="step-input" type="text" formControlName="instagram" autocomplete="none" appTrimValue />
  </mat-form-field>
  <app-validation-hint
    [validationFormControl]="DescriptionFormGroup.get('instagram')"
    [minCharacters]="validationConstants.INPUT_LENGTH_1"
    [maxCharacters]="validationConstants.INPUT_LENGTH_256">
  </app-validation-hint>

  <div class="border-bottom"></div>

  <app-info-form
    *ngFor="let form of SectionItemsFormArray.controls"
    [infoEditFormGroup]="form"
    [index]="SectionItemsFormArray.controls.indexOf(form)"
    [formAmount]="SectionItemsFormArray.controls.length"
    [maxDescriptionLength]="validationConstants.MAX_DESCRIPTION_LENGTH_500"
    (deleteForm)="onDeleteForm($event)">
  </app-info-form>

  <button
    *ngIf="SectionItemsFormArray.controls.length < 10"
    [disabled]="SectionItemsFormArray.invalid"
    class="btn-add"
    mat-button
    (click)="onAddForm()">
    <mat-icon class="mat-icon-add">add</mat-icon>{{ 'BUTTONS.ADD_ANOTHER_SECTION' | translate }}
  </button>

  <label class="step-label"> {{ 'FORMS.LABELS.SUPPORT_PERSONS_WITH_DISABILITIES' | translate }} </label>
  <mat-radio-group [formControl]="disabilityOptionRadioBtn" color="primary" fxLayout="column" fxLayoutAlign="center space-between">
    <mat-radio-button #radio1 name="radioBtn1" [value]="false">{{ 'NOT_AVAILABLE' | translate }}</mat-radio-button>
    <mat-radio-button #radio2 name="radioBtn2" [value]="true">{{ 'AVAILABLE' | translate }}</mat-radio-button>
    <input
      matInput
      class="step-input"
      [ngClass]="{ 'disabled-field': !disabilityOptionRadioBtn.value }"
      placeholder="{{ 'FORMS.PLACEHOLDERS.SPECIAL_EQUIPMENT' | translate }}"
      formControlName="disabilityOptionsDesc"
      autocomplete="off"
      appTrimValue />
    <app-validation-hint
      [validationFormControl]="DescriptionFormGroup.get('disabilityOptionsDesc')"
      [minCharacters]="validationConstants.INPUT_LENGTH_1"
      [maxCharacters]="validationConstants.INPUT_LENGTH_256">
    </app-validation-hint>
  </mat-radio-group>

  <div class="step-label-combined">
    <label class="step-label">{{ 'FORMS.LABELS.KEYWORDS' | translate }}</label>
    <label class="step-characters-count">{{ keyWords.length }}/{{ validationConstants.MAX_KEYWORDS_LENGTH }}</label>
  </div>
  <div class="step-input keywords" (click)="setFocus()">
    <span *ngIf="!keyWord && keyWords.length < 1" class="keywordsPlaceholder"
      >{{ 'FORMS.PLACEHOLDERS.KEYWORDS_START' | translate }} {{ validationConstants.MAX_KEYWORDS_LENGTH }}
      {{ 'FORMS.PLACEHOLDERS.KEYWORDS_END' | translate }}</span
    >
    <mat-chip-list #chipList>
      <mat-chip *ngFor="let keyWord of keyWords" (removed)="onRemoveKeyWord(keyWord)" class="keyWordChip">
        <div [matTooltip]="keyWord" showTooltipIfTruncated matTooltipClass="tooltip" class="chip-text">
          {{ keyWord }}
        </div>
        <mat-icon class="mat-icon" matChipRemove>close</mat-icon>
      </mat-chip>
      <!-- TODO: Remove ngModel attribute -->
      <input
        [ngClass]="{ 'keywords-input': !keyWord && keyWords.length < 1 }"
        #keyWordsInput
        (focusout)="onKeyWordsInput()"
        [formControl]="keyWordsCtrl"
        [matChipInputFor]="chipList"
        (keyup.enter)="onKeyWordsInput()"
        [(ngModel)]="keyWord"
        autocomplete="off"
        appTrimValue />
    </mat-chip-list>
  </div>

  <label class="step-label step-label-title">{{ 'FORMS.LABELS.FORM_OF_LEARNING' | translate }}</label>
  <mat-radio-group formControlName="formOfLearning" color="primary" fxLayout="column" fxLayoutAlign="center space-between">
    <ng-container *ngFor="let formOfLearning of FormOfLearning | keyvalue: Util.keyValueNumericSorting">
      <mat-radio-button *ngIf="FormOfLearningEnum[formOfLearning.key]" [value]="formOfLearning.key">
        {{ FormOfLearningEnum[formOfLearning.key] | translate }}
      </mat-radio-button>
    </ng-container>
  </mat-radio-group>

  <label class="step-label step-label-title">{{ 'COMPETITIVE_SELECTION' | translate }}</label>
  <mat-radio-group [formControl]="competitiveSelectionRadioBtn" color="primary" fxLayout="column" fxLayoutAlign="center space-between">
    <mat-radio-button name="radioBtn" [value]="false">
      {{ 'WITHOUT_COMPETITIVE_SELECTION' | translate }}
    </mat-radio-button>
    <mat-radio-button name="radioBtn" [value]="true">
      {{ 'WITH_COMPETITIVE_SELECTION' | translate }}
    </mat-radio-button>
  </mat-radio-group>

  <ng-container *ngIf="DescriptionFormGroup.get('competitiveSelection').value">
    <div class="step-label-combined">
      <label class="step-label">{{ 'INFO_ABOUT_SELECTION' | translate }}<span class="step-required">*</span></label>
      <label class="step-characters-count">
        <ng-container *ngIf="DescriptionFormGroup.get('competitiveSelectionDescription').value; else elseBlock">
          {{ DescriptionFormGroup.get('competitiveSelectionDescription').value?.length }}/{{
            validationConstants.MAX_DESCRIPTION_LENGTH_500
          }}
        </ng-container>
        <ng-template #elseBlock> 0/{{ validationConstants.MAX_DESCRIPTION_LENGTH_500 }} </ng-template>
      </label>
    </div>
    <textarea
      matInput
      class="step-textarea step-textarea-short"
      placeholder="{{ 'FORMS.PLACEHOLDERS.MAXIMUM' | translate }} {{ validationConstants.MAX_DESCRIPTION_LENGTH_500 }} {{
        'FORMS.PLACEHOLDERS.SYMBOLS' | translate
      }}"
      formControlName="competitiveSelectionDescription"
      [maxLength]="validationConstants.MAX_DESCRIPTION_LENGTH_500"></textarea>
    <app-validation-hint
      [validationFormControl]="DescriptionFormGroup.get('competitiveSelectionDescription')"
      [minCharacters]="validationConstants.INPUT_LENGTH_1"
      [maxCharacters]="validationConstants.MAX_DESCRIPTION_LENGTH_500"></app-validation-hint>
  </ng-container>
</form>
