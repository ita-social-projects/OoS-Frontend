<mat-card *ngIf="application" [ngClass]="application.status === applicationStatus.Pending ? 'card card-new' : 'card'">
  <mat-card-content class="card-block" fxLayout="column" fxLayoutAlign="start start">
    <div class="workshop-header" fxLayout="column" fxLayoutAlign="start start">
      <div #name class="workshop-header" (mouseover)="!deviceToogle && onInfoShow(name, $event)"
        (mouseleave)="!deviceToogle && onInfoHide(name)" (click)="deviceToogle && onInfoShow(name, $event)">
        <h4 class="name title">{{ application.child.lastName }} {{ application.child.firstName }} {{
          application.child.middleName }}</h4>
      </div>
      <p class="text text-bold">{{ childAge }}</p>
      <p class="text">{{ application.creationTime | date: constants.FULL_DATE_FORMAT }}</p>
    </div>
  </mat-card-content>
<ng-container *ngIf="application.isBlocked then applicationStatus===applicationStatus.Blocked">
  <mat-card-content class="card-block" fxLayout="column" fxLayoutAlign="start center">
    <div class="workshop-description" fxLayout="column" fxLayoutAlign="start start">
      <h4 [routerLink]="['/details/workshop', application?.workshopId]" [matTooltip]="application?.workshop.title"
        showTooltipIfTruncated matTooltipClass="tooltip" matTooltipPosition="below" class="title text-link">{{
        application?.workshop.title }} </h4>
      <div class="organization" fxLayout="row" fxLayoutAlign="center center" *ngIf="userRole === role.parent">
        <mat-icon class="text_icon">home</mat-icon>
        <p class="text">{{application?.workshop.providerTitle}}</p>
      </div>
      <div class="workshop-age" fxLayout="row" fxLayoutAlign="center center" *ngIf="userRole === role.parent">
        <mat-icon class="text_icon">person</mat-icon>
        <p class="text">{{application?.workshop.minAge}} - {{application?.workshop.maxAge}}</p>
      </div>
    </div>
  </mat-card-content>
</ng-container>

  <mat-card-content class="card-block" fxLayout="row" fxLayoutAlign="start center">
    <div class="application-status" *ngIf="application" fxLayout="row">
      <div class="application-popup-status {{application.status}}">
        <span> <i class="status-icon {{applicationIcons[application.status]}}"></i></span>
        <span> {{applicationTitles[application.status]}}</span>
      </div>
      <span><i class="material-icons status-info-icon" [matMenuTriggerFor]="menu" #trigger="matMenuTrigger" (hasBackdrop)="true"
        [ngClass]="trigger.menuOpen ? 'activeInfoBtn' : 'inactiveInfoBtn'">info_outline</i></span>
        <mat-menu class="status-menu"  #menu="matMenu" disabled [overlapTrigger]="false"
          xPosition="after" class="mat-application-menu">
          <app-status-info-card [application]="application"></app-status-info-card>
        </mat-menu>
    </div>
  </mat-card-content>

  <mat-card-content class="card-block card-block-buttons" *ngIf="userRole === role.provider">
    <div fxLayout="column" fxLayoutAlign="start start"
      [ngClass]="(application.status === applicationStatus.Approved || application.status === applicationStatus.Left) && 'hidden'">
      <button class="btn btn-blue" (click)="onApprove(application)">
        <p>ПРИЙНЯТИ</p>
      </button>
    </div>
    <div fxLayout="column" fxLayoutAlign="start start"
      [ngClass]="(application.status === applicationStatus.Rejected || application.status === applicationStatus.Left) && 'hidden'">
      <button class="btn btn-gray" (click)="onReject(application)">
        <p>ВІДМОВИТИ</p>
      </button>
    </div>
  </mat-card-content>

  <mat-card-content class="card-block" fxLayout="row" fxLayoutAlign="center center" *ngIf="userRole === role.parent">
    <div fxLayout="column" fxLayoutAlign="start start"
      [ngClass]="(application.status === applicationStatus.Left || application.status === applicationStatus.Rejected) && 'hidden'">
      <button class="btn btn-gray" (click)="onLeave(application)">
        <p>ЗАЛИШИТИ ГУРТОК</p>
      </button>
    </div>
  </mat-card-content>
</mat-card>
