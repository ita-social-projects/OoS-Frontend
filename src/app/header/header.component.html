<div class="header" [ngClass]="(isMainPage$ | async) ? '' : 'header_secondary'">
  <div class="header_top">
    <div class="header_logo-wrapper">
      <a routerLink="/"><img class="logo" src="../../assets/images/Logo.svg" alt="Позашкілля"></a>
    </div>
    <div class="header_btns">
      <button mat-flat-button class="header_lang">
        <mat-icon>language</mat-icon>
        УКР
      </button>
      <div *ngIf="(isAuthorized$ | async) then isAuthorized; else isUnauthorized"></div>
    </div>
  </div>
  <div *ngIf="(isMainPage$ | async) then isMainPage;" class="header_wrapper"></div>
</div>

<ng-template #isMainPage>
  <div fxLayout="column" fxLayoutAlign="none center">
    <h1 class="header_title">
      Знайдіть найкращі гуртки у своєму місті!
    </h1>
    <h2 class="header_descr">
      Понад 500 найрізноманітніших гуртків
    </h2>
    <div class="header_search">
      <mat-icon> place</mat-icon>
      <app-city-filter class="header_city"></app-city-filter>
      <app-searchbar class="header_bar"></app-searchbar>
    </div>
  </div>
</ng-template>

<ng-template #isUnauthorized>
  <button mat-stroked-button class="header_login" (click)="login()">
    УВІЙТИ/ЗАРЕЄСТРУВАТИСЯ
  </button>
</ng-template>

<ng-template #isAuthorized>
  <div class="authorization">
    <button mat-raised-button color="primary" matBadge="2" matBadgePosition="before" matBadgeColor="accent">
      <i>
        <mat-icon class="icon-account">account_circle</mat-icon>
        <!-- <mat-icon class="icon-message"> email</mat-icon> -->
      </i>
    </button>
    <button mat-button [matMenuTriggerFor]="log">
      <h1 *ngIf="user">{{user.firstName}} {{user.lastName}}</h1>
    </button>
    <mat-menu #log="matMenu">
      <a [routerLink]="'./personal-cabinet/' + user.role + '/config'"><button mat-menu-item>Налаштування</button></a>
      <a [routerLink]="'./personal-cabinet/' + user.role + '/info'"> <button mat-menu-item>Інформація про
          {{roles[user.role]}}</button></a>
      <a [routerLink]="'./personal-cabinet/workshops'"><button mat-menu-item>Мої гуртки</button></a>
      <a [routerLink]="'./personal-cabinet/applications'"><button mat-menu-item>Мої заяви</button></a>
      <a [routerLink]="'./personal-cabinet/messages'"><button mat-menu-item>Повідомлення</button></a>
      <button mat-menu-item (click)="logout()">Вийти</button>
    </mat-menu>
  </div>
</ng-template>
<ng-container *ngIf="(isLoading$ | async) then Spinner;"></ng-container>

<ng-template #Spinner>
  <div class="spinner">
    <mat-progress-spinner diameter=80 mode="indeterminate" color="primary">
    </mat-progress-spinner>
  </div>
</ng-template>