<mat-card [ngClass]="isHorizontalView ? 'horizontal' : '' ">
  <div *ngIf="workshop; else EmptyWorkshop">
    <ng-container *ngIf="(isMainPage || userRole !== role.provider) then UserActions; else ProviderActions;">
    </ng-container>

    <div
      [ngClass]="isHorizontalView ? 'horizontal-card': 'card'"
    >
      <div class="card-img" fxLayout="row" fxLayoutAlign="center">
        <img class="card-image" mat-card-image [src]="categoryIcons[workshop.directionId]" alt="{{workshop.title}}">
      </div>
      <div class="wrap-for-details">
        <mat-card-header>
          <mat-card-title
            [matTooltip]="workshop.title"
            showTooltipIfTruncated
            [matTooltipPosition]="below"
          >{{workshop.title}}</mat-card-title>
        </mat-card-header>

        <mat-card-content fxLayout="column" fxLayoutAlign="space-between">

          <div *ngIf="userRole === role.parent" fxLayout="row" fxLayoutAlign="space-between center"
            class="parent-status">
            <p class="{{application.status}} icon">
              <mat-icon>how_to_reg</mat-icon>{{
              applicationTitles[application.status] }}
            </p>
            <p class="card_link status_action" *ngIf="application.status === applicationStatus.Approved"
              (click)="onWorkshopLeave()">Залишити гурток
            </p>
          </div>

          <p class="card_text">
            <mat-icon class="card_icon">star</mat-icon> {{ workshop.rating }}
          </p>
          <p class="card_text">
            <mat-icon class="card_icon">home</mat-icon>{{ workshop.providerTitle }}
          </p>
          <p class="card_text" [ngClass]="isCreateApplicationView ? 'hide': ''">
            <mat-icon class="card_icon">person</mat-icon>{{ workshop.minAge }} - {{ workshop.maxAge }} років
          </p>
          <p class="card_text" *ngIf="!workshop.price">
            <mat-icon class="card_icon"> attach_money</mat-icon> Безкоштовно
          </p>
          <p class="card_text" *ngIf="workshop.price">
            <mat-icon class="card_icon"> attach_money</mat-icon> {{ workshop.price }} грн/
            {{ workshop.isPerMonth
            ? 'місяць' : 'заняття' }}
          </p>
        </mat-card-content>

        <mat-card-footer *ngIf="isCreateApplicationView" class="card-footer">
          <a class="more-details" [routerLink]="['/workshop-details',workshop.workshopId ]">
            <span class="card_link">Детальніше</span>
            <mat-icon>arrow_forward</mat-icon>
          </a>
        </mat-card-footer>

      </div>
    </div>
  </div>
</mat-card>

<ng-template #ProviderActions>
  <div fxLayout="row" fxLayoutAlign="end start" class="actions">
    <div class="actions_btn action-icon" [routerLink]="['/create-workshop', workshop.workshopId]">
      <mat-icon>edit</mat-icon>
    </div>
    <div class="actions_btn action-icon" (click)="onDelete()">
      <mat-icon>delete</mat-icon>
    </div>
  </div>
</ng-template>

<ng-template #UserActions>
<div *ngIf="(role$ | async) !== role.provider">
  <div *ngIf="!isHorizontalView" fxLayout="row" fxLayoutAlign="end start" class="actions">

    <ng-container *ngIf="isFavorite then favorite; else notFavorite"></ng-container>
    <ng-template #favorite>
      <div (click)="(roleUser === role.parent) && onDisLike(this.favoriteWorkshopId?.id)" class="actions_btn action-icon favorite-icon">
        <mat-icon>favorite</mat-icon>
      </div>
    </ng-template>
    <ng-template #notFavorite>
      <div (click)="(roleUser === role.parent) ? onLike() : onOpenDialog()" class="actions_btn action-icon">
        <mat-icon>favorite_border</mat-icon>
      </div>
    </ng-template>
  </div>
</div>
</ng-template>

<ng-template #EmptyWorkshop>
  <div class="empty-card" fxLayout="column" fxLayoutAlign="space-between space-between" display="none">
  </div>
</ng-template>
