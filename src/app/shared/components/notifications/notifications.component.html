<button mat-icon-button [matMenuTriggerFor]="menu" (click)="getNotifications()" class="pointer">
  <mat-icon>notifications_none</mat-icon>
</button>
<span *ngIf="notificationsAmount$ | async">
  <mat-icon [matBadge]="notificationsAmount" matBadgePosition="before"></mat-icon>
</span>
<mat-menu #menu="matMenu">
  <div class="container">
    <ng-container *ngIf="notificationsData$ | async as notificationsData">
      <h3 class="title">СПОВІЩЕННЯ</h3>
      <ng-conatiner *ngIf="notificationsAmount; else isEmptyList">
        <ng-container *ngTemplateOutlet="Notifications; context:{$implicit: notificationsData }">
        </ng-container>
      </ng-conatiner>
    </ng-container>
  </div>
</mat-menu>

<ng-template #isEmptyList>
  <span fxLayout="row wrap" fxLayoutAlign="start start">У вас немає нових повідомлень</span>
</ng-template>

<ng-template #Notifications let-notificationsData>
  <ng-container *ngIf="notificationsData.notificationsGrouped.length">
    <span *ngFor="let notifications of notificationsData.notificationsGrouped" fxLayout="row wrap"
      fxLayoutAlign="space-between center">{{getDeclensionNewApplication(notifications.amount)}}
      <mat-icon class="icon" (click)="onReadGroup(notifications)">
        arrow_forward</mat-icon>
    </span>
  </ng-container>
  <ng-container *ngIf="notificationsData.notifications.length">
    <div *ngFor="let notification of notificationsData.notifications" matMenuItem disableRipple="true">
      <span fxLayout="row wrap" fxLayoutAlign="space-between center">{{notification.text}}<mat-icon class="icon"
          (click)="onReadSingle($event, notification)">
          highlight_off
        </mat-icon></span>
    </div>
  </ng-container>
</ng-template>